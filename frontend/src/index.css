@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Light theme colors */
  --bg-primary: #f8fafc;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f1f5f9;
  --bg-card: #ffffff;
  --bg-card-hover: #f8fafc;
  --text-primary: #1e293b;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  --border-color: #e2e8f0;
  --border-subtle: #f1f5f9;
  --shadow-color: rgba(0, 0, 0, 0.08);
  --accent-primary: #7B68EE;
  --accent-hover: #6c47ff;
}

.dark {
  /* Dark theme colors - ClickUp style */
  --bg-primary: #1e1e2d;
  --bg-secondary: #27293d;
  --bg-tertiary: #2d2f45;
  --bg-card: #2d2f45;
  --bg-card-hover: #363850;
  --text-primary: #ffffff;
  --text-secondary: #a0aec0;
  --text-muted: #718096;
  --border-color: #3d4058;
  --border-subtle: #363850;
  --shadow-color: rgba(0, 0, 0, 0.3);
  --accent-primary: #7B68EE;
  --accent-hover: #8b7cf6;
}

@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.2s, color 0.2s;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold;
    color: var(--text-primary);
  }

  h1 { @apply text-3xl; }
  h2 { @apply text-2xl; }
  h3 { @apply text-xl; }
  h4 { @apply text-lg; }
}

@layer components {
  /* ========================================
     MODERN BUTTON SYSTEM
     ======================================== */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center justify-center gap-2;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover));
    @apply text-white;
    @apply hover:shadow-lg;
  }

  .btn-primary:hover {
    box-shadow: 0 4px 14px rgba(123, 104, 238, 0.4);
  }

  .btn-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .btn-secondary:hover {
    background-color: var(--bg-card-hover);
  }

  .btn-outline {
    border: 1px solid var(--border-color);
    background-color: var(--bg-card);
    color: var(--text-primary);
  }

  .btn-outline:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--border-color);
  }

  .btn-ghost {
    background-color: transparent;
    color: var(--text-secondary);
  }

  .btn-ghost:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .btn-danger {
    @apply bg-gradient-to-r from-red-500 to-red-600 text-white;
    @apply hover:from-red-600 hover:to-red-700 hover:shadow-lg;
  }

  .btn-success {
    @apply bg-gradient-to-r from-emerald-500 to-emerald-600 text-white;
    @apply hover:from-emerald-600 hover:to-emerald-700 hover:shadow-lg;
  }

  .btn-sm { @apply px-3 py-1.5 text-sm; }
  .btn-lg { @apply px-6 py-3 text-lg; }
  .btn-icon { @apply p-2 rounded-lg; }

  /* ========================================
     CARD SYSTEM
     ======================================== */
  .card {
    background-color: var(--bg-card);
    border: 1px solid var(--border-subtle);
    @apply rounded-xl p-6;
    @apply transition-all duration-300 ease-out;
  }

  .card-hover:hover {
    background-color: var(--bg-card-hover);
    border-color: var(--border-color);
    @apply -translate-y-0.5;
    box-shadow: 0 4px 20px var(--shadow-color);
  }

  /* ========================================
     WIDGET CONTAINER - CLICKUP STYLE
     ======================================== */
  .widget-container {
    background-color: var(--bg-card);
    border: 1px solid var(--border-subtle);
    @apply rounded-xl overflow-hidden;
    @apply transition-all duration-200 ease-out;
  }

  .widget-container:hover {
    border-color: var(--border-color);
  }

  .widget-container.is-editing {
    @apply ring-2 ring-purple-500/30;
    border-color: var(--accent-primary);
  }

  .widget-header {
    @apply px-4 py-3 flex items-center justify-between;
    border-bottom: 1px solid var(--border-subtle);
  }

  .widget-header-title {
    @apply flex items-center gap-2;
  }

  .widget-header-title h3 {
    @apply font-semibold text-sm;
    color: var(--text-primary);
  }

  .widget-actions {
    @apply flex items-center gap-1 opacity-0 transition-opacity duration-200;
  }

  .widget-container:hover .widget-actions,
  .widget-container.is-editing .widget-actions {
    @apply opacity-100;
  }

  .widget-action-btn {
    @apply p-1.5 rounded-lg transition-all duration-150;
    color: var(--text-muted);
  }

  .widget-action-btn:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .widget-action-btn.danger:hover {
    @apply bg-red-500/10 text-red-500;
  }

  .widget-body {
    @apply p-4;
    @apply min-h-[140px];
  }

  .widget-body.compact { @apply p-3 min-h-[100px]; }
  .widget-body.large { @apply p-5 min-h-[240px]; }

  /* ========================================
     KPI CARD - CLICKUP STYLE
     ======================================== */
  .kpi-card {
    @apply flex flex-col h-full justify-center;
  }

  .kpi-label {
    @apply text-xs font-medium uppercase tracking-wider mb-2;
    color: var(--text-muted);
  }

  .kpi-value {
    @apply text-4xl lg:text-5xl font-bold tracking-tight;
    color: var(--text-primary);
  }

  .kpi-unit {
    @apply text-sm font-normal mt-1;
    color: var(--text-muted);
  }

  .kpi-trend {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold mt-2;
  }

  .kpi-trend.positive {
    @apply bg-emerald-500/20 text-emerald-400;
  }

  .kpi-trend.negative {
    @apply bg-red-500/20 text-red-400;
  }

  .kpi-trend.neutral {
    background-color: var(--bg-tertiary);
    color: var(--text-muted);
  }

  /* ========================================
     DASHBOARD HEADER - CLICKUP STYLE
     ======================================== */
  .dashboard-header {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-subtle);
    @apply px-6 py-3 sticky top-0 z-30;
  }

  .dashboard-header-content {
    @apply flex items-center justify-between;
  }

  .dashboard-title-section {
    @apply flex items-center gap-4;
  }

  .dashboard-title {
    @apply text-lg font-semibold;
    color: var(--text-primary);
  }

  .dashboard-actions {
    @apply flex items-center gap-3;
  }

  /* Toggle Switch - ClickUp style */
  .toggle-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full cursor-pointer transition-colors;
    background-color: var(--bg-tertiary);
  }

  .toggle-switch.active {
    background-color: var(--accent-primary);
  }

  .toggle-switch-knob {
    @apply inline-block h-4 w-4 transform rounded-full bg-white transition-transform;
    @apply translate-x-1;
  }

  .toggle-switch.active .toggle-switch-knob {
    @apply translate-x-6;
  }

  .toggle-label {
    @apply text-sm font-medium;
    color: var(--text-secondary);
  }

  /* ========================================
     DASHBOARD CANVAS
     ======================================== */
  .dashboard-canvas {
    @apply flex-1 p-5 overflow-auto;
    background-color: var(--bg-primary);
    min-height: calc(100vh - 120px);
  }

  /* ========================================
     EMPTY STATE
     ======================================== */
  .empty-state {
    @apply flex flex-col items-center justify-center py-16 px-8 text-center;
  }

  .empty-state-icon {
    @apply w-20 h-20 mb-6 rounded-2xl flex items-center justify-center;
    background-color: var(--bg-tertiary);
  }

  .empty-state-icon svg {
    @apply w-10 h-10;
    color: var(--text-muted);
  }

  .empty-state-title {
    @apply text-xl font-semibold mb-2;
    color: var(--text-primary);
  }

  .empty-state-description {
    @apply mb-8 max-w-md;
    color: var(--text-secondary);
  }

  /* ========================================
     DASHBOARD CARD (Listing Page)
     ======================================== */
  .dashboard-card {
    background-color: var(--bg-card);
    border: 1px solid var(--border-subtle);
    @apply rounded-xl p-5 cursor-pointer group relative overflow-hidden;
    @apply transition-all duration-300 ease-out;
  }

  .dashboard-card:hover {
    background-color: var(--bg-card-hover);
    border-color: var(--border-color);
    @apply -translate-y-1;
    box-shadow: 0 8px 30px var(--shadow-color);
  }

  .dashboard-card-header {
    @apply flex items-start justify-between mb-3;
  }

  .dashboard-card-icon {
    @apply w-10 h-10 rounded-lg flex items-center justify-center;
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover));
    @apply text-white flex-shrink-0;
  }

  .dashboard-card-title {
    @apply text-base font-semibold mb-1;
    color: var(--text-primary);
  }

  .dashboard-card-title:hover {
    color: var(--accent-primary);
  }

  .dashboard-card-description {
    @apply text-sm line-clamp-2 mb-3;
    color: var(--text-secondary);
  }

  .dashboard-card-meta {
    @apply flex items-center justify-between text-xs pt-3;
    border-top: 1px solid var(--border-subtle);
    color: var(--text-muted);
  }

  .dashboard-card-stat {
    @apply flex items-center gap-1.5;
  }

  /* ========================================
     FORM ELEMENTS
     ======================================== */
  .input {
    @apply w-full px-4 py-2.5 rounded-lg;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    @apply placeholder-gray-500;
    @apply focus:outline-none focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500;
    @apply transition-all duration-200;
  }

  .input:hover {
    border-color: var(--text-muted);
  }

  .label {
    @apply block text-sm font-medium mb-1.5;
    color: var(--text-secondary);
  }

  .select {
    @apply input appearance-none cursor-pointer pr-10;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.25rem;
  }

  /* ========================================
     MODAL STYLING
     ======================================== */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
    background-color: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
  }

  .modal-content {
    background-color: var(--bg-secondary);
    @apply rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden;
    @apply animate-modal-enter;
  }

  .modal-header {
    @apply px-6 py-4 flex items-center justify-between;
    border-bottom: 1px solid var(--border-subtle);
  }

  .modal-header h2 {
    @apply text-lg font-semibold;
    color: var(--text-primary);
  }

  .modal-body {
    @apply px-6 py-4 overflow-y-auto;
  }

  .modal-footer {
    @apply px-6 py-4 flex items-center justify-end gap-3;
    border-top: 1px solid var(--border-subtle);
    background-color: var(--bg-tertiary);
  }

  @keyframes modal-enter {
    from { opacity: 0; transform: scale(0.95) translateY(-10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }

  .animate-modal-enter {
    animation: modal-enter 0.2s ease-out;
  }

  /* ========================================
     ADD WIDGET MODAL - CLICKUP STYLE
     ======================================== */
  .add-widget-modal {
    @apply w-full max-w-5xl;
  }

  .add-widget-layout {
    @apply flex h-[600px];
  }

  .add-widget-sidebar {
    @apply w-56 flex-shrink-0 py-4 overflow-y-auto;
    background-color: var(--bg-tertiary);
    border-right: 1px solid var(--border-subtle);
  }

  .add-widget-category {
    @apply px-3 py-2 mx-2 rounded-lg cursor-pointer flex items-center gap-3 text-sm;
    color: var(--text-secondary);
    @apply transition-colors duration-150;
  }

  .add-widget-category:hover {
    background-color: var(--bg-card-hover);
    color: var(--text-primary);
  }

  .add-widget-category.active {
    background-color: var(--accent-primary);
    @apply text-white;
  }

  .add-widget-category-icon {
    @apply w-5 h-5 flex-shrink-0;
  }

  .add-widget-content {
    @apply flex-1 p-6 overflow-y-auto;
  }

  .add-widget-grid {
    @apply grid grid-cols-3 gap-4;
  }

  .widget-preview-card {
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-subtle);
    @apply rounded-xl overflow-hidden cursor-pointer;
    @apply transition-all duration-200;
  }

  .widget-preview-card:hover {
    border-color: var(--accent-primary);
    @apply -translate-y-1;
    box-shadow: 0 4px 20px var(--shadow-color);
  }

  .widget-preview-image {
    @apply h-32 flex items-center justify-center;
    background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-tertiary) 100%);
  }

  .widget-preview-info {
    @apply p-3;
  }

  .widget-preview-title {
    @apply text-sm font-semibold mb-1;
    color: var(--text-primary);
  }

  .widget-preview-description {
    @apply text-xs line-clamp-2;
    color: var(--text-muted);
  }

  /* ========================================
     DROPDOWN MENU
     ======================================== */
  .dropdown-menu {
    @apply absolute right-0 mt-2 w-48 py-1 z-50 overflow-hidden;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    @apply rounded-xl shadow-lg;
    @apply animate-dropdown-enter;
  }

  .dropdown-item {
    @apply px-4 py-2 text-sm cursor-pointer flex items-center gap-2;
    color: var(--text-secondary);
    @apply transition-colors duration-150;
  }

  .dropdown-item:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .dropdown-item.danger {
    @apply text-red-500;
  }

  .dropdown-item.danger:hover {
    @apply bg-red-500/10;
  }

  .dropdown-divider {
    @apply my-1;
    border-top: 1px solid var(--border-subtle);
  }

  @keyframes dropdown-enter {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-dropdown-enter {
    animation: dropdown-enter 0.15s ease-out;
  }

  /* ========================================
     BADGE SYSTEM
     ======================================== */
  .badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary { @apply bg-purple-500/20 text-purple-400; }
  .badge-success { @apply bg-emerald-500/20 text-emerald-400; }
  .badge-warning { @apply bg-amber-500/20 text-amber-400; }
  .badge-danger { @apply bg-red-500/20 text-red-400; }
  .badge-gray {
    background-color: var(--bg-tertiary);
    color: var(--text-muted);
  }

  /* ========================================
     CHART TOOLTIP
     ======================================== */
  .chart-tooltip {
    @apply rounded-lg p-3 shadow-xl;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
  }

  .chart-tooltip-label {
    @apply text-sm font-semibold mb-1;
    color: var(--text-primary);
  }

  .chart-tooltip-value {
    @apply text-sm;
    color: var(--text-secondary);
  }

  /* ========================================
     LOADING & SKELETON
     ======================================== */
  .skeleton {
    @apply rounded-lg;
    background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-card-hover) 50%, var(--bg-tertiary) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  .loading-spinner {
    @apply w-8 h-8 border-2 rounded-full animate-spin;
    border-color: var(--border-color);
    border-top-color: var(--accent-primary);
  }

  /* ========================================
     SIDEBAR NAVIGATION
     ======================================== */
  .sidebar {
    background-color: var(--bg-secondary);
    border-right: 1px solid var(--border-subtle);
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-2.5 rounded-lg cursor-pointer;
    color: var(--text-secondary);
    @apply transition-colors duration-150;
  }

  .sidebar-item:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .sidebar-item.active {
    background-color: var(--accent-primary);
    @apply text-white;
  }
}

@layer utilities {
  /* ========================================
     SCROLLBAR
     ======================================== */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: var(--text-muted);
  }

  /* ========================================
     REACT GRID LAYOUT
     ======================================== */
  .react-grid-item {
    transition: all 200ms ease;
    transition-property: left, top, width, height;
  }

  .react-grid-item.cssTransforms {
    transition-property: transform, width, height;
  }

  .react-grid-item.resizing,
  .react-grid-item.react-draggable-dragging {
    transition: none;
    z-index: 100;
  }

  .react-grid-item.react-draggable-dragging {
    @apply ring-2 ring-purple-500/50;
  }

  .react-grid-item.react-grid-placeholder {
    @apply rounded-xl border-2 border-dashed;
    background-color: var(--accent-primary);
    opacity: 0.2;
    border-color: var(--accent-primary);
  }

  .react-resizable-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    @apply opacity-0 transition-opacity duration-200;
  }

  .widget-container:hover .react-resizable-handle {
    @apply opacity-100;
  }

  .react-resizable-handle::after {
    content: "";
    position: absolute;
    right: 4px;
    bottom: 4px;
    width: 8px;
    height: 8px;
    border-right: 2px solid var(--text-muted);
    border-bottom: 2px solid var(--text-muted);
    border-radius: 0 0 2px 0;
  }

  .react-resizable-handle:hover::after {
    border-color: var(--accent-primary);
  }

  .react-resizable-handle-se {
    bottom: 0;
    right: 0;
    cursor: se-resize;
  }

  /* ========================================
     ANIMATIONS
     ======================================== */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
  .animate-fadeInUp { animation: fadeInUp 0.4s ease-out; }
  .animate-scaleIn { animation: scaleIn 0.2s ease-out; }

  /* ========================================
     TEXT UTILITIES
     ======================================== */
  .text-gradient {
    @apply bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent;
  }

  .line-clamp-1 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; }
  .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
  .line-clamp-3 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }

  /* ========================================
     RESPONSIVE
     ======================================== */
  @media (max-width: 768px) {
    .dashboard-header { @apply px-4 py-2; }
    .dashboard-canvas { @apply p-3; }
    .widget-header { @apply px-3 py-2; }
    .widget-body { @apply p-3; }
    .add-widget-grid { @apply grid-cols-2; }
  }

  @media (max-width: 480px) {
    .add-widget-grid { @apply grid-cols-1; }
  }
}
